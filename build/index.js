!function(){"use strict";var e,t={65:function(){var e=window.wp.element,t=window.wp.blocks,l=window.wp.blockEditor;function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a])}return e},a.apply(this,arguments)}var n=window.wp.i18n,r=window.wp.components,o=window.wp.data,s=window.wp.coreData;const c=e=>{const t=null==e?void 0:e.reduce(((e,t)=>{const{mapById:l,mapByName:a,names:n}=e;return l[t.id]=t,a[t.name]=t,n.push(t.name),e}),{mapById:{},mapByName:{},names:[]});return{terms:e,...t}};(0,t.registerBlockType)("fourmi-e/table-articles",{edit:function(u){var i;const{setAttributes:m,clientId:p,attributes:{actualPostType:d,blockId:g,query:b,displayOptions:f,lirePlus:h}}=u,{perPage:y,offset:v,order:E,orderBy:_,author:k,postType:w,sticky:C,inherit:T,tagIds:O}=b;g&&g===p||m({blockId:p});const P=[["fourmi-e/conteneur-bouton",{...h}]],{replaceInnerBlocks:I}=(0,o.useDispatch)("core/block-editor"),B=()=>{g&&g===p||m({blockId:p})},{postTypesTaxonomiesMap:N,postTypesSelectOptions:q}=(()=>{const{postTypes:t}=(0,o.useSelect)((e=>{var t;const{getPostTypes:l}=e(s.store),a=["attachment","wp_block","wp_template"];return{postTypes:null===(t=l({per_page:-1}))||void 0===t?void 0:t.filter((e=>{let{viewable:t,slug:l}=e;return t&&!a.includes(l)}))}}),[]);return{postTypesTaxonomiesMap:(0,e.useMemo)((()=>{if(null!=t&&t.length)return t.reduce(((e,t)=>(e[t.slug]=t.taxonomies,e)),{})}),[t]),postTypesSelectOptions:(0,e.useMemo)((()=>(t||[]).map((e=>{let{labels:t,slug:l}=e;return{label:t.singular_name,value:l}}))),[t])}})(),{authorList:x,categories:S,tags:D}=(0,o.useSelect)((e=>{const{getEntityRecords:t}=e(s.store),l={per_page:3},a=t("taxonomy","category",l),n=t("taxonomy","post_tag",l);return{categories:c(a),tags:c(n),authorList:t("root","user",{per_page:-1})}}),[]),{taxoList:L}=(0,o.useSelect)((e=>({taxoList:e("core").getEntityRecords("taxonomy","post_tag")})),[]),R=(e,t)=>l=>{const a=Array.from(l.reduce(((t,l)=>{const a=((e,t)=>{var l;const a=(null==t?void 0:t.id)||(null===(l=e[t])||void 0===l?void 0:l.id);if(a)return a;const n=t.toLocaleLowerCase();for(const t in e)if(t.toLocaleLowerCase()===n)return e[t].id})(e.mapByName,l);return a&&t.add(a),t}),new Set));m({query:{...b,[t]:a}}),B()},F=(R(S,"categoryIds"),R(D,"tagIds")),{resultForEditDisplay:M}=(0,o.useSelect)((e=>{const t=e("core/editor").getCurrentPostId(),l={per_page:y,exclude:t,tags:O,offset:v};return{resultForEditDisplay:e("core").getEntityRecords("postType",w,l)}}));return(0,e.useEffect)((()=>{(()=>{let e=[(0,t.createBlock)("fourmi-e/conteneur-bouton",{...h})];I(p,e,!1)})()}),[h]),(0,e.createElement)(e.Fragment,null,(0,e.createElement)(l.InspectorControls,null,(0,e.createElement)(r.PanelBody,null,(0,e.createElement)(r.SelectControl,{label:(0,n.__)("Selected Post Type","fourmi-e"),options:q,value:w,onChange:e=>{const t={postType:e};N[e].includes("category")||(t.categoryIds=[]),N[e].includes("post_tag")||(t.tagIds=[]),"post"!==e&&(t.sticky=""),m({query:{...b,...t},actualPostType:q.find((t=>t.value===e)).label}),B()}}),null!=N&&N[w].length&&(null==D||null===(i=D.terms)||void 0===i?void 0:i.length)>0?(0,e.createElement)(r.FormTokenField,{value:(e=>{const t={queryProp:"tagIds",terms:D};return(b[t.queryProp]||[]).reduce(((e,l)=>{const a=t.terms.mapById[l];return a&&e.push({id:l,value:a.name}),e}),[])})(),suggestions:D.names,onChange:F}):null),(0,e.createElement)(r.PanelBody,null,(0,e.createElement)(r.__experimentalNumberControl,{label:(0,n.__)("Nombre d'entrées par page","fourmi-e"),onChange:e=>{m({query:{...b,perPage:e}}),B()},value:y,min:-1}),(0,e.createElement)(r.ToggleControl,{label:(0,n.__)("Présenter tout les entrée","fourmi-e"),onChange:()=>{m({displayOptions:{...f,table:{...f.table,allResult:!f.table.allResult}}}),0==!f.table.allResult?m({lirePlus:{...h,colonnage_withStart:!0,colonnage_medium_start:17}}):m({lirePlus:{...h,colonnage_withStart:!1,colonnage_medium_start:1}})},help:f.table.allResult?"Oui":"Non",checked:f.table.allResult})),(0,e.createElement)(r.PanelBody,null,(0,e.createElement)(r.__experimentalNumberControl,{label:(0,n.__)("Décalage des résultats","fourmi-e"),onChange:e=>{m({query:{...b,offset:e}}),B()},value:v,min:0})),(0,e.createElement)(r.PanelBody,null,(0,e.createElement)(r.ToggleControl,{label:(0,n.__)("is Date ?","fourmi-e"),help:f.table.date?"Oui":"Non",checked:f.table.date,onChange:()=>m({displayOptions:{...f,table:{...f.table,date:!f.table.date}}})}),(0,e.createElement)(r.ToggleControl,{label:(0,n.__)("is Étiquette ?","fourmi-e"),help:f.table.etiquette?"Oui":"Non",checked:f.table.etiquette,onChange:()=>m({displayOptions:{...f,table:{...f.table,etiquette:!f.table.etiquette}}})}),(0,e.createElement)(r.ToggleControl,{label:(0,n.__)("is More ?","fourmi-e"),help:f.table.more?"Oui":"Non",checked:f.table.more,onChange:()=>m({displayOptions:{...f,table:{...f.table,more:!f.table.more}}})}),(0,e.createElement)(r.SelectControl,{label:(0,n.__)("Selected Post Type","fourmi-e"),options:[{label:"Turquoise",value:"turquoise"},{label:"Indigo",value:"indigo"},{label:"Corail",value:"corail"}],value:f.colorTheme,onChange:e=>{m({displayOptions:{...f,colorTheme:e},lirePlus:{...h,backgroundColorClass:`bg-${e}-dark`}})}}))),(0,e.createElement)("div",a({},(0,l.useBlockProps)(),{className:`${(0,l.useBlockProps)().className} table-theme-${f.colorTheme} bg-${f.colorTheme}-base `}),(0,e.createElement)("div",{className:`conteneur col-24 col-md-16 bg-${f.colorTheme}-light`},(0,e.createElement)("table",{className:"table-article"},(0,e.createElement)("thead",null,(0,e.createElement)("tr",null,d&&(0,e.createElement)("th",{className:"head-post-type"},d),f.table.date&&(0,e.createElement)("th",{className:"head-post-date"},"Date"),f.table.etiquette&&(0,e.createElement)("th",{className:"head-post-tags"},"Étiquettes"))),(0,e.createElement)("tbody",null,M&&M.map((t=>(0,e.createElement)("tr",{"data-value":t.id},t.title&&(0,e.createElement)("td",null,(0,e.createElement)("a",{href:t.link,onClick:e=>e.preventDefault(),dangerouslySetInnerHTML:{__html:t.title.rendered}})),f.table.date&&t.date&&(0,e.createElement)("td",null,(0,e.createElement)("a",{href:t.link,onClick:e=>e.preventDefault()},new Date(t.date).toLocaleDateString())),f.table.etiquette&&t.tags&&t.tags.length?(0,e.createElement)("td",null,(0,e.createElement)("a",{href:t.link,onClick:e=>e.preventDefault()},t.tags.map(((l,a)=>{var n;return(0,e.createElement)(e.Fragment,null,null==L||null===(n=L.find((e=>e.id===l)))||void 0===n?void 0:n.name,a<t.tags.length-1?", ":"")})))):(0,e.createElement)("td",null,(0,e.createElement)("a",{href:t.link})))))))),(0,e.createElement)("div",{className:"conteneur col-24 col-md-8 bg-blanc"}),f.table.more&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)(l.InnerBlocks,{template:P}))))},save:()=>(0,e.createElement)(l.InnerBlocks.Content,null)})}},l={};function a(e){var n=l[e];if(void 0!==n)return n.exports;var r=l[e]={exports:{}};return t[e](r,r.exports,a),r.exports}a.m=t,e=[],a.O=function(t,l,n,r){if(!l){var o=1/0;for(i=0;i<e.length;i++){l=e[i][0],n=e[i][1],r=e[i][2];for(var s=!0,c=0;c<l.length;c++)(!1&r||o>=r)&&Object.keys(a.O).every((function(e){return a.O[e](l[c])}))?l.splice(c--,1):(s=!1,r<o&&(o=r));if(s){e.splice(i--,1);var u=n();void 0!==u&&(t=u)}}return t}r=r||0;for(var i=e.length;i>0&&e[i-1][2]>r;i--)e[i]=e[i-1];e[i]=[l,n,r]},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={826:0,431:0};a.O.j=function(t){return 0===e[t]};var t=function(t,l){var n,r,o=l[0],s=l[1],c=l[2],u=0;if(o.some((function(t){return 0!==e[t]}))){for(n in s)a.o(s,n)&&(a.m[n]=s[n]);if(c)var i=c(a)}for(t&&t(l);u<o.length;u++)r=o[u],a.o(e,r)&&e[r]&&e[r][0](),e[o[u]]=0;return a.O(i)},l=self.webpackChunkfourmie_table_articles=self.webpackChunkfourmie_table_articles||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var n=a.O(void 0,[431],(function(){return a(65)}));n=a.O(n)}();